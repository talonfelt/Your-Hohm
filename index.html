<!DOCTYPE  html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Hohm — U.R.H.U.E.0hm</title>

  <!-- SEO -->
  <meta name="description" content="Your Hohm: a unified theory of physics grounded in a singular, toroidal vibration that is fundamentally tri-directional." />
  <meta property="og:title" content="U.R.H.U.E.0hm — Unfolding Resonant Harmonic Unity Emergence — The Zero Point of Infinite Potentiality" />
  <meta property="og:description" content="Derivations, verification protocol, and testable predictions." />
  <meta property="og:type" content="website" />

  <!-- MathJax (light config) -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- PDF.js for article mode -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}

    :root{
      /* default (dark) theme values */
      --bg:#04060a;
      --ink:#f7fbff;
      --muted:#b7c3d1;
      --line:rgba(160,190,255,.25);
      --panel:rgba(12,16,24,.66);
      --panel-2:rgba(10,14,22,.66);
      --glass:blur(10px)saturate(115%);
      --radius-lg:18px;
      --radius-md:14px;
      --accA:#8fb3ff;
      --accB:#7affea;
      --accC:#ff99e6;
      --glow:0 0 18px rgba(127,187,255,.55),0 0 36px rgba(122,255,234,.35);
      --soft:0 10px 30px rgba(0,0,0,.45);
    }

    /* Light theme overrides */
    body[data-theme="light"]{
      --bg:#f5f7fc;
      --ink:#02040a;
      --muted:#5c6675;
      --line:rgba(70,90,130,.3);
      --panel:rgba(255,255,255,.96);
      --panel-2:rgba(245,248,255,.96);
      --soft:0 10px 25px rgba(0,0,0,.12);
    }

    html,body{
      background:var(--bg);
      color:var(--ink);
      font-family:system-ui,sans-serif;
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
    }

    .container{max-width:1160px;margin:0 auto;padding:28px}

    header{
      padding:20px 0 28px;
      border-bottom:1px solid var(--line);
      margin-bottom:28px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .header-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    h1{
      font-size:clamp(2.2rem,4.5vw,3.2rem);
      text-shadow:0 0 24px rgba(140,180,255,.35);
    }

    .theme-toggle{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:var(--panel-2);
      color:var(--ink);
      font-size:.85rem;
      cursor:pointer;
    }

    .tagline{color:rgba(230,240,255,.9);font-size:1.05rem}
    body[data-theme="light"] .tagline{color:#283044}
    .subtitle{color:var(--muted);font-size:.95rem}

    .panel{
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:var(--radius-lg);
      padding:22px;
      backdrop-filter:var(--glass);
      box-shadow:var(--soft);
    }
    .panel.alt{background:var(--panel-2)}

    .h-underline{display:inline-block;position:relative;padding-bottom:6px;margin-bottom:10px}
    .h-underline::after{
      content:"";
      position:absolute;
      left:0;bottom:0;
      height:2px;width:100px;
      background:linear-gradient(90deg,var(--accA),var(--accB),var(--accC));
      border-radius:999px;
      box-shadow:var(--glow);
    }

    .hero{margin:28px 0;padding:26px}
    .hero-contact{margin-top:14px;font-size:1rem}
    .hero-contact a{color:var(--accB);font-weight:700;text-decoration:none}

    .stats{
      display:grid;
      gap:16px;
      margin:26px 0;
      grid-template-columns:repeat(4,minmax(0,1fr));
    }
    .stat{text-align:center;padding:18px;border-radius:var(--radius-md);border:1px solid var(--line)}
    .stat-number{font-weight:800;font-size:1.6rem;margin-bottom:4px}
    .stat-label{color:var(--muted);font-size:.9rem}

    .download-grid{
      display:grid;
      gap:16px;
      margin:28px 0;
      grid-template-columns:repeat(3,minmax(0,1fr));
    }
    .card{
      text-align:center;
      padding:24px;
      border-radius:var(--radius-lg);
      border:1px solid var(--line);
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.00));
      box-shadow:var(--soft);
    }
    .card h3{margin-bottom:8px}
    .card p{color:var(--muted);margin-bottom:14px}

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 16px;
      border-radius:12px;
      font-weight:700;
      text-decoration:none;
      color:#031018;
      background:linear-gradient(135deg,var(--accA),var(--accB));
      box-shadow:var(--glow);
      border:none;
      cursor:pointer;
      font-size:.92rem;
    }

    .pdf-wrap{margin:38px 0 10px}
    .pdf-title{text-align:center;font-size:1.6rem;margin-bottom:14px}

    .pdf-mode-toggle{
      display:flex;
      gap:8px;
      margin-bottom:10px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .mode-btn{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:var(--panel-2);
      color:var(--ink);
      font-size:.85rem;
      cursor:pointer;
    }
    .mode-btn.active{
      background:linear-gradient(135deg,var(--accA),var(--accB));
      color:#020308;
      box-shadow:var(--glow);
      border:none;
    }

    .pdf-toolbar{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }
    .pdf-toolbar-controls{
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
    }
    .pdf-nav-btn{
      padding:6px 10px;
      border-radius:8px;
      border:1px solid var(--line);
      background:var(--panel-2);
      color:var(--ink);
      font-size:.85rem;
      cursor:pointer;
    }
    .pdf-viewer{
      width:100%;
      height:800px;
      border-radius:var(--radius-lg);
      border:1px solid var(--line);
      background:#000;
      box-shadow:var(--soft);
    }

    .article-view{
      margin-top:18px;
      border-radius:var(--radius-lg);
      border:1px solid var(--line);
      background:#02030a;
      padding:16px;
      max-height:80vh;
      overflow:auto;
      box-shadow:var(--soft);
    }
    body[data-theme="light"] .article-view{background:#e6ebf7;}
    .article-page-canvas{
      display:block;
      margin:0 auto 18px auto;
      background:#111;
    }
    body[data-theme="light"] .article-page-canvas{background:#fff;}
    #article-loader{
      text-align:center;
      color:var(--muted);
      font-size:.9rem;
      margin-bottom:10px;
    }

    .prediction{border-radius:var(--radius-md);padding:18px;margin:14px 0;border:1px solid var(--line)}
    .pill-label{padding:2px 8px;border-radius:8px;color:#fff;font-size:.9rem}

    .support-panel{margin:40px 0}
    .support-panel p{color:var(--muted);margin-bottom:12px}
    .support-buttons{display:flex;gap:10px;flex-wrap:wrap}

    .toroid-section{margin-top:40px}
    .toroid-container{
      width:100%;
      height:650px;
      border-radius:18px;
      background:#000;
      overflow:hidden;
      box-shadow:var(--soft);
    }
    #toroid-fallback{
      margin-top:10px;
      font-size:.9rem;
      color:var(--muted);
      display:none;
    }

    footer{
      margin-top:40px;
      text-align:center;
      border-top:1px solid var(--line);
      padding-top:16px;
      color:var(--muted);
      font-size:.9rem;
    }
    footer a{color:var(--accB);text-decoration:none;font-weight:600}

    @media(max-width:1020px){
      .stats{grid-template-columns:repeat(2,minmax(0,1fr))}
      .download-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
    @media(max-width:760px){
      .container{padding:20px}
      .stats,.download-grid{grid-template-columns:1fr}
      .pdf-viewer{height:520px}
      .article-view{max-height:none}
      .toroid-container{height:520px}
    }
  </style>
</head>

<body data-theme="dark">
  <div class="container">

    <header>
      <div class="header-top">
        <h1>YOUR HOHM</h1>
        <button id="theme-toggle" class="theme-toggle">Light mode</button>
      </div>
      <div class="tagline">A Unified Physics Model and Framework</div>
      <div class="subtitle">U.R.H.U.E.0hm — Unfolding Resonant Harmonic Unity Emergence</div>
      <div class="subtitle">Talon Jeffrey Felt</div>
      <div class="subtitle">September 3rd, 2025 — Updated: November 9th, 2025</div>
    </header>

    <!-- HERO -->
    <section class="hero panel">
      <p>Your Hohm presents a unified theory of physics grounded in a singular, toroidal vibration that is fundamentally tri-directional — “coming”, “going”, and “staying”. Mirrored, simultaneously folding and unfolding, inward and outward, yet eternally still, as the zero point of infinite potentiality.</p>
      <p class="hero-contact"><strong>Primary contact:</strong> <a href="mailto:your@hohm.cc">your@hohm.cc</a></p>
    </section>

    <!-- STATS -->
    <section class="stats">
      <div class="stat"><div class="stat-number">6</div><div class="stat-label">Constants Derived</div></div>
      <div class="stat"><div class="stat-number">54</div><div class="stat-label">Orders of Magnitude</div></div>
      <div class="stat"><div class="stat-number">0.03%</div><div class="stat-label">Ensemble Residual</div></div>
      <div class="stat"><div class="stat-number">~0</div><div class="stat-label">Tunable Parameters</div></div>
    </section>

    <!-- DOWNLOAD / ACCESS -->
    <section class="download-grid">
      <article class="card">
        <h3>Read the Paper</h3>
        <p>Complete PDF: derivations, predictions, appendices.</p>
        <a class="btn" href="URHUE0hm.pdf" target="_blank" rel="noopener">
          Open full PDF / Download
        </a>
      </article>
      <article class="card">
        <h3>Get the Source</h3>
        <p>Full LaTeX sources with macros.</p>
        <a class="btn" href="URHUE0hm.zip" download>Download LaTeX</a>
      </article>
      <article class="card">
        <h3>Verify Yourself</h3>
        <p>Reproduce the numbers end-to-end.</p>
        <a class="btn" href="#verification">See Instructions</a>
      </article>
    </section>

    <!-- PDF VIEWER + ARTICLE MODE -->
    <section class="pdf-wrap">
      <h2 class="pdf-title h-underline">Read Online</h2>

      <div class="pdf-mode-toggle">
        <button id="mode-pdf" class="mode-btn active">PDF mode</button>
        <button id="mode-article" class="mode-btn">Article mode (beta)</button>
      </div>

      <div id="pdf-view">
        <div class="pdf-toolbar">
          <div class="pdf-toolbar-controls">
            <button id="pdf-prev" class="pdf-nav-btn">Previous page</button>
            <button id="pdf-next" class="pdf-nav-btn">Next page</button>
            <span>Page <span id="pdf-page-number">1</span>
              <span id="pdf-ios-note" style="display:none;">— iOS may restrict inline scrolling.</span>
            </span>
          </div>
          <a class="btn" href="URHUE0hm.pdf" target="_blank" rel="noopener">
            Open full PDF / Download
          </a>
        </div>

        <iframe
          id="pdf-frame"
          class="pdf-viewer"
          src="URHUE0hm.pdf#view=FitH"
          title="Your Hohm PDF">
        </iframe>
      </div>

      <div id="article-view" class="article-view" style="display:none;">
        <div id="article-loader">Loading article view…</div>
      </div>
    </section>

    <!-- VERIFICATION -->
    <section id="verification" class="panel alt" style="margin-top:30px;">
      <h2 class="h-underline">Verification Protocol</h2>
      <p><strong>This is a computation, not a copy-paste.</strong></p>
      <div class="code" style="margin-top:10px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:.9rem;background:rgba(6,10,16,.7);border-radius:12px;padding:12px;border:1px solid rgba(160,190,255,.35);">
        1. Download LaTeX source<br/>
        2. pdflatex your_hohm.tex<br/>
        3. Open generated PDF<br/>
        4. Compare Section 7
      </div>
      <div class="warning" style="margin-top:12px;background:rgba(255,120,120,.12);border:1px solid rgba(255,160,160,.45);padding:10px;border-radius:12px;color:#ffd6d6;">
        <strong>CRITICAL:</strong> Any discrepancy → email <a href="mailto:your@hohm.cc" style="color:#fff;text-decoration:underline;">your@hohm.cc</a>
      </div>
    </section>

    <!-- PREDICTIONS -->
    <section style="margin-top:30px;">
      <h2 class="h-underline" style="text-align:center;margin-bottom:16px">Novel Testable Predictions</h2>

      <article class="prediction">
        <h3>
          <span class="pill-label" style="background:rgba(0,255,255,.5);">
            1. EIC Jet Asymmetries
          </span>
        </h3>
        <p><strong>Prediction:</strong> $A_N = 0.03 \\pm 0.003$ at $\\sqrt{s}=100$ GeV</p>
        <p><strong>Test:</strong> Polarized $pp$ at the Electron-Ion Collider</p>
      </article>

      <article class="prediction">
        <h3>
          <span class="pill-label" style="background:rgba(255,0,255,.5);">
            2. Phonon Linewidth Temperature Scaling
          </span>
        </h3>
        <p><strong>Prediction:</strong> $\\sigma_\\nu \\propto \\sqrt{T}$</p>
        <p><strong>Test:</strong> Diamond phonons 4 K vs 300 K via Brillouin scattering</p>
      </article>

      <article class="prediction">
        <h3>
          <span class="pill-label" style="background:rgba(255,255,0,.65);">
            3. NMR Hyperfine Shifts
          </span>
        </h3>
        <p><strong>Prediction:</strong> $\\delta\\gamma(H_2) \\approx 0.014$ Hz, $\\delta\\gamma(N_2) \\approx 0.035$ Hz</p>
        <p><strong>Test:</strong> Gas-phase NMR at 500 MHz</p>
      </article>
    </section>

    <!-- SUPPORT PANEL -->
    <section class="support-panel panel">
      <h2 class="h-underline">Support the Work</h2>
      <p>Direct support helps keep the calculations, verification, and experiments moving.</p>
      <div class="support-buttons">
        <a class="btn" href="https://cash.app/$TalonFelt">Cash App: $TalonFelt</a>
        <a class="btn" href="https://venmo.com/@Talonfelt">Venmo: @Talonfelt</a>
        <a class="btn" href="https://paypal.me/Talonj3f">PayPal: @Talonj3f</a>
      </div>
    </section>

    <!-- TOROIDAL VISUALIZATION -->
    <section class="toroid-section panel alt">
      <h2 class="h-underline">Your Hohm Torus — Interactive Visualization</h2>
      <p style="color:var(--muted);"><em>(may not be live yet)</em></p>
      <div id="toroid-container" class="toroid-container"></div>
      <div id="toroid-fallback">WebGL visualization could not be initialized on this device.</div>
    </section>

    <footer>
      <p><strong>Hohm.cc</strong></p>
      <p style="margin-top:8px;">Primary contact: <a href="mailto:your@hohm.cc">your@hohm.cc</a></p>
      <p style="margin-top:6px;">CC BY-NC-ND 4.0</p>
    </footer>

  </div>

  <!-- THREE / ORBIT -->
  <script src="three.min.js"></script>
  <script src="OrbitControls.js"></script>

  <!-- THEME TOGGLE -->
  <script>
    (function(){
      const btn = document.getElementById('theme-toggle');
      if(!btn) return;

      function applyTheme(theme){
        document.body.setAttribute('data-theme', theme);
        btn.textContent = theme === 'dark' ? 'Light mode' : 'Dark mode';
        try{ localStorage.setItem('hohm-theme', theme); }catch(e){}
      }

      let stored = null;
      try{ stored = localStorage.getItem('hohm-theme'); }catch(e){}
      applyTheme(stored === 'light' ? 'light' : 'dark');

      btn.addEventListener('click', () => {
        const current = document.body.getAttribute('data-theme') || 'dark';
        applyTheme(current === 'dark' ? 'light' : 'dark');
      });
    })();
  </script>

  <!-- PDF PAGE JUMPER + MODE SWITCH -->
  <script>
    (function(){
      const frame = document.getElementById('pdf-frame');
      const prevBtn = document.getElementById('pdf-prev');
      const nextBtn = document.getElementById('pdf-next');
      const pageLabel = document.getElementById('pdf-page-number');
      const iosNote = document.getElementById('pdf-ios-note');

      const pdfView = document.getElementById('pdf-view');
      const articleView = document.getElementById('article-view');
      const articleLoader = document.getElementById('article-loader');
      const modePdfBtn = document.getElementById('mode-pdf');
      const modeArticleBtn = document.getElementById('mode-article');

      if(!frame || !prevBtn || !nextBtn || !pageLabel) return;

      // iOS detection
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const isIOS = /iPad|iPhone|iPod/.test(ua);
      if(isIOS && iosNote) iosNote.style.display = 'inline';

      let currentPage = 1;
      const baseSrc = 'URHUE0hm.pdf';

      function jumpToPage(){
        frame.src = baseSrc + '#page=' + currentPage + '&view=FitH';
        pageLabel.textContent = String(currentPage);
      }

      prevBtn.addEventListener('click', ()=>{
        if(currentPage > 1){
          currentPage--;
          jumpToPage();
        }
      });

      nextBtn.addEventListener('click', ()=>{
        currentPage++;
        jumpToPage();
      });

      // Mode switching
      let articleRendered = false;

      function setMode(mode){
        if(mode === 'pdf'){
          modePdfBtn.classList.add('active');
          modeArticleBtn.classList.remove('active');
          pdfView.style.display = '';
          articleView.style.display = 'none';
        }else{
          modePdfBtn.classList.remove('active');
          modeArticleBtn.classList.add('active');
          pdfView.style.display = 'none';
          articleView.style.display = 'block';
          if(!articleRendered){
            renderArticleView();
          }
        }
      }

      function renderArticleView(){
        const pdfjsLib = window.pdfjsLib;
        if(!pdfjsLib || !articleView) return;

        articleRendered = true;
        pdfjsLib.GlobalWorkerOptions.workerSrc =
          'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        const loadingTask = pdfjsLib.getDocument(baseSrc);
        loadingTask.promise.then(pdf => {
          const total = pdf.numPages;
          if(articleLoader) articleLoader.textContent = 'Rendering ' + total + ' pages…';

          for(let pageNum = 1; pageNum <= total; pageNum++){
            pdf.getPage(pageNum).then(page => {
              const viewport = page.getViewport({ scale: 1.2 });
              const canvas = document.createElement('canvas');
              const context = canvas.getContext('2d');
              canvas.width = viewport.width;
              canvas.height = viewport.height;
              canvas.className = 'article-page-canvas';
              articleView.appendChild(canvas);

              page.render({ canvasContext: context, viewport });
            });
          }

          if(articleLoader){
            setTimeout(()=>{ articleLoader.remove(); }, 800);
          }
        }).catch(err => {
          if(articleLoader){
            articleLoader.textContent = 'Unable to render article view.';
          }
          console.error(err);
        });
      }

      modePdfBtn.addEventListener('click', ()=>setMode('pdf'));
      modeArticleBtn.addEventListener('click', ()=>setMode('article'));

      // default mode
      setMode('pdf');
    })();
  </script>

  <!-- TORUS VISUALIZER: FULL + LIGHT FALLBACK -->
  <script>
    (function(){
      const c = document.getElementById('toroid-container');
      const fallback = document.getElementById('toroid-fallback');
      if(!c || !window.THREE){ if(fallback) fallback.style.display='block'; return; }

      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const isIOS = /iPad|iPhone|iPod/.test(ua);

      function initRenderer(){
        const renderer = new THREE.WebGLRenderer({ antialias:true });
        renderer.setSize(c.clientWidth, c.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio || 1);
        c.innerHTML = '';
        c.appendChild(renderer.domElement);
        return renderer;
      }

      function initScene(renderer, lightMode){
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x04060a);

        const camera = new THREE.PerspectiveCamera(
          45, c.clientWidth/c.clientHeight, 0.1, 1000
        );
        camera.position.set(0,0,28);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 12;
        controls.maxDistance = 70;

        let geo, mat, torus;

        if(!lightMode){
          // full version: dense geometry + dynamic wave
          geo = new THREE.TorusGeometry(8,2,160,320);
          mat = new THREE.MeshBasicMaterial({ side:THREE.DoubleSide, vertexColors:true });
          torus = new THREE.Mesh(geo, mat);
          scene.add(torus);

          const pos = torus.geometry.attributes.position;
          const cols = new Float32Array(pos.count*3);
          let t = 0;

          function waveFrame(){
            const v = pos.array;
            for(let i=0;i<pos.count;i++){
              const u=(i%320)/320;
              const vv=Math.floor(i/320)/160;
              const phase=t+3*u*2*Math.PI+9*vv*2*Math.PI;
              const w=Math.sin(phase)*Math.cos(27*(u+vv));
              const rad=2+1.5*Math.abs(w);
              const x=(8+rad*Math.cos(vv*2*Math.PI))*Math.cos(u*2*Math.PI);
              const y=(8+rad*Math.cos(vv*2*Math.PI))*Math.sin(u*2*Math.PI);
              const z=rad*Math.sin(vv*2*Math.PI);

              v[i*3]=x;v[i*3+1]=y;v[i*3+2]=z;

              const hue=(w+1)/2;
              const col=new THREE.Color().setHSL(hue,1,0.5);
              cols[i*3]=col.r;cols[i*3+1]=col.g;cols[i*3+2]=col.b;
            }
            pos.needsUpdate=true;

            if(!torus.geometry.attributes.color){
              torus.geometry.setAttribute('color', new THREE.BufferAttribute(cols,3));
            }else{
              torus.geometry.attributes.color.array = cols;
              torus.geometry.attributes.color.needsUpdate = true;
            }
            t += 0.008;
          }

          return { scene, camera, controls, renderer, torus, animateFn: waveFrame };
        } else {
          // light version: simpler geometry, just slow rotation + static gradient
          geo = new THREE.TorusGeometry(8,1.4,48,96);
          const cols = [];
          const posAttr = geo.attributes.position;
          for(let i=0;i<posAttr.count;i++){
            const u=(i%96)/96;
            const col = new THREE.Color().setHSL(u,1,0.5);
            cols.push(col.r,col.g,col.b);
          }
          geo.setAttribute('color', new THREE.Float32BufferAttribute(cols,3));
          mat = new THREE.MeshBasicMaterial({ side:THREE.DoubleSide, vertexColors:true });
          torus = new THREE.Mesh(geo, mat);
          scene.add(torus);

          function rotateFrame(){
            torus.rotation.x += 0.004;
            torus.rotation.y += 0.006;
          }

          return { scene, camera, controls, renderer, torus, animateFn: rotateFrame };
        }
      }

      function start(lightMode){
        let renderer;
        try{
          renderer = initRenderer();
        }catch(e){
          if(fallback) fallback.style.display='block';
          return;
        }
        const { scene, camera, controls, animateFn } = initScene(renderer, lightMode);

        function onResize(){
          if(!c) return;
          const w=c.clientWidth, h=c.clientHeight;
          camera.aspect = w/h;
          camera.updateProjectionMatrix();
          renderer.setSize(w,h);
        }
        window.addEventListener('resize', onResize);

        function loop(){
          requestAnimationFrame(loop);
          if(controls) controls.update();
          if(animateFn) animateFn();
          renderer.render(scene, camera);
        }
        loop();
      }

      // Full version by default; light on iOS (fallback) or if full init throws.
      if(isIOS){
        // iOS: go straight to light mode
        start(true);
      } else {
        try{
          start(false);
        }catch(e){
          try{
            start(true);
          }catch(e2){
            if(fallback) fallback.style.display='block';
          }
        }
      }
    })();
  </script>
</body>
</html>